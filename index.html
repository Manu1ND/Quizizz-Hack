<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Home - Quizizz Hack</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <nav class="navbar navbar-light navbar-expand bg-light navigation-clean">
        <div class="container"><a class="navbar-brand" href="#">QUizizz Hack</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"></button>
            <div class="collapse navbar-collapse" id="navcol-1"><a class="btn btn-primary ml-auto" role="button" href="https://github.com/Manu1ND">Manu1ND</a></div>
        </div>
    </nav>
    <header class="masthead text-white text-center" style="background:url('assets/img/bg-masthead.jpg')no-repeat center center;background-size:cover;" id="start">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-xl-9 mx-auto">
                    <h1 class="mb-5">Enter URL...</h1>
                </div>
                <div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
                    <div class="form-row">
                        <div class="col-12 col-md-9 mb-2 mb-md-0">
                            <input class="form-control form-control-lg" type="url" id="urlid" placeholder="Enter URL here...">
                        </div>
                        <div class="col-12 col-md-3">
                            <button class="btn btn-primary btn-block btn-lg" type="submit" href="quesans" id="button">Submit!!!</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <section class="features-icons bg-light text-center" id="quesans" style="display: none;">
        <div class="container">
            <div class="row" id="questions">
            </div>
        </div>
    </section>
    <footer class="footer bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 my-auto h-100 text-center text-lg-left">
                    <p class="text-muted small mb-4 mb-lg-0">Quizizz Hack.</p>
                </div>
                <div class="col-lg-6 my-auto h-100 text-center text-lg-right">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item"><a href="https://github.com/Manu1ND"><i class="fa fa-github fa-2x fa-fw"></i></a></li>
                        <li class="list-inline-item"><a href="https://twitter.com/Iam_Manu21"><i class="fa fa-twitter fa-2x fa-fw"></i></a></li>
                        <li class="list-inline-item"><a href="https://www.instagram.com/naik_manu21/"><i class="fa fa-instagram fa-2x fa-fw"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById("button").onclick = function() {
            //https://cors-anywhere.herokuapp.com/
            var url = "https://allow-any-origin.appspot.com/" + document.getElementById('urlid').value;
            //removes join/
            url = url.replace("join/", "");
            var n = url.indexOf('/start');
            url = url.substring(0, n != -1 ? n : url.length);
            document.getElementById("questions").innerHTML = "";
            document.getElementById("quesans").style.display = 'none';
            document.getElementById("quesans").style.display = 'block';
            document.getElementById("quesans").scrollIntoView({
                behavior: "smooth"
            });

            fetch(url)
                .then(response => response.json())
                .then(json => {
                    var data = json.data.quiz.info.questions;
                    console.log(data);
                    for (var i = 0; i < data.length; i++) {
                        const div = document.createElement('div');
                        div.className = 'col-lg-12';
                        const innerdiv = document.createElement('div');
                        innerdiv.className = 'mx-auto features-icons-item mb-5 mb-lg-0 mb-lg-3';

                        console.log(i);
                        var question = data[i].structure.query.text.slice(3, -4);
                        console.log(question);
                        innerdiv.innerHTML = `
                    <h3 >` + question + `</h3>`;
                        var options = data[i].structure.options;
                        if (data[i].type == "MCQ") {
                            var ans = data[i].structure.answer;
                            var answer = options[ans].text.slice(3, -4);
                            console.log(answer);
                            innerdiv.innerHTML += `<p class = "lead mb-0" >` + answer + `</p>`;
                        } else if (data[i].type == "MSQ") {
                            var ans = data[i].structure.answer;
                            for (var j = 0; j < ans.length; j++) {
                                var answer = options[ans[j]].text.slice(3, -4);
                                console.log(answer);
                                innerdiv.innerHTML += `<p class = "lead mb-0" >` + answer + `</p>`;
                            }
                        } else if (data[i].type == "BLANK") {
                            for (var j = 0; j < options.length; j++) {
                                var answer = options[j].text;
                                console.log(answer);
                                innerdiv.innerHTML += `<p class = "lead mb-0" >` + answer + `</p>`;
                            }
                        }
                        div.append(innerdiv);
                        document.getElementById('questions').appendChild(div);
                    }
                });
        }
    </script>
    <script>
    </script>
</body>

</html>

</html>